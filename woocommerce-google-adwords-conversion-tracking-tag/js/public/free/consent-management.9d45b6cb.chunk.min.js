/*! Copyright 2025 SweetCode. All rights reserved. */
"use strict";(self.webpackChunkPixel_Manager_for_WooCommerce=self.webpackChunkPixel_Manager_for_WooCommerce||[]).push([[625],{383(t,n,s){s.r(n),s.d(n,{canPixelBeFired:()=>I,categories:()=>A,cmpConsentClickObserver:()=>z,explicitConsentModeActive:()=>M,load:()=>L,logSuppressedPixel:()=>J,settings:()=>b});const o={getConsent:()=>{let e=pmw.getCookie("cookieconsent_status");if(e||(e=pmw.getCookieThatContainsRegex(/^cookieconsent_status/)),!e)return null;if(pmw.console.log("Beautiful Cookie Consent CMP consent detected"),"allow"===e||"dismiss"===e)return{statistics:!0,marketing:!0,preferences:!0,necessary:!0};if("deny"===e)return{statistics:!1,marketing:!1,preferences:!1,necessary:!0};if("savesettings"===e||"detailed"===e||"allowall"===e)return"allowall"===e?{statistics:!0,marketing:!0,preferences:!0,necessary:!0}:{statistics:i(["statistics","analytics"]),marketing:i(["marketing"]),preferences:i(["preferences","functional","tech"]),necessary:!0};const t=i(["marketing"]),n=i(["statistics","analytics"]),s=i(["preferences","functional","tech"]);return null!==t||null!==n||null!==s?{statistics:n??!0,marketing:t??!0,preferences:s??!0,necessary:!0}:null},loadEventListeners:()=>{void 0!==window.dataLayer&&Array.isArray(window.dataLayer)?c():window.addEventListener("DOMContentLoaded",()=>{void 0!==window.dataLayer&&Array.isArray(window.dataLayer)&&c()})}},i=e=>{for(const t of e){const e=pmw.getCookie(`cookieconsent_status_${t}`);if("allow"===e)return!0;if("deny"===e)return!1}return null},c=()=>{const e=window.dataLayer.push.bind(window.dataLayer);window.dataLayer.push=function(...t){const n=e(...t);return t.forEach(e=>{e&&"beautiful_cookie_consent_updated"===e.event&&r(e)}),n}},r=e=>{pmw.console.log("Beautiful Cookie Consent consent update detected via dataLayer");const t=e.cookieconsent_status;if("allow"!==t&&"dismiss"!==t)if("deny"!==t)if("allowall"!==t){if("savesettings"===t||"detailed"===t){const t={statistics:a(e,["statistics","analytics"]),marketing:a(e,["marketing"]),preferences:a(e,["preferences","functional","tech"]),necessary:!0};pmw.consent.api.updateSelectively(t)}}else pmw.consent.api.updateSelectively({statistics:!0,marketing:!0,preferences:!0,necessary:!0});else pmw.consent.api.updateSelectively({statistics:!1,marketing:!1,preferences:!1,necessary:!0});else pmw.consent.api.updateSelectively({statistics:!0,marketing:!0,preferences:!0,necessary:!0})},a=(e,t)=>{for(const n of t){const t=`cookieconsent_status_${n}`;if("allow"===e[t])return!0;if("deny"===e[t])return!1}return!1},l={getConsent:()=>{let e=pmw.getCookie("cmplz_statistics")||pmw.getCookie("cmplz_rt_statistics"),t=pmw.getCookie("cmplz_marketing")||pmw.getCookie("cmplz_rt_marketing"),n=pmw.getCookie("cmplz_preferences")||pmw.getCookie("cmplz_rt_preferences"),s=pmw.getCookie("cmplz_functional")||pmw.getCookie("cmplz_rt_functional");return pmw.getCookie("cmplz_consent_status")||pmw.getCookie("cmplz_banner-status")||pmw.getCookie("cmplz_rt_banner-status")?(pmw.console.log("Complianz CMP consent detected"),{statistics:""===e||"allow"===e,marketing:""===t||"allow"===t,preferences:""===n||"allow"===n,necessary:""===s||"allow"===s}):null},loadEventListeners:()=>{document.addEventListener("cmplz_fire_categories",d,!0)}},d=e=>{let t={statistics:e.detail.categories.includes("statistics"),marketing:e.detail.categories.includes("marketing"),preferences:e.detail.categories.includes("preferences"),necessary:e.detail.categories.includes("functional")};pmw.consent.api.updateSelectively(t)},p={getConsent:()=>{let e=pmw.getCookie("CookieConsent");return e?(pmw.console.log("Cookiebot CMP consent detected"),g(e)||(e=decodeURI(e),e=e.replace(/'/g,'"'),e=decodeURIComponent(e),e=e.replace(/(\w+):/g,'"$1":')),e=JSON.parse(e),{statistics:e.statistics??!0,marketing:e.marketing??!0,preferences:e.preferences??!0,necessary:e.necessary??!0}):null},loadEventListeners:()=>{window.addEventListener("CookiebotOnAccept",e=>{let t={statistics:e.currentTarget.CookieConsent.consent.statistics??!0,marketing:e.currentTarget.CookieConsent.consent.marketing??!0,preferences:e.currentTarget.CookieConsent.consent.preferences??!0,necessary:e.currentTarget.CookieConsent.consent.necessary??!0};pmw.consent.api.updateSelectively(t)},!0)}},g=e=>{try{JSON.parse(e)}catch(e){return!1}return!0},m={getConsent:()=>{let e=pmw.getCookie("cookiefirst-consent");return e?(pmw.console.log("Cookiefirst CMP consent detected"),u(e)||(e=decodeURI(e),e=e.replace(/'/g,'"'),e=decodeURIComponent(e),e=e.replace(/(\w+):/g,'"$1":')),e=JSON.parse(e),console.log("cookiefirst consent object",e),{statistics:e.performance??!0,marketing:e.advertising??!0,preferences:e.functional??!0,necessary:e.necessary??!0}):null},loadEventListeners:()=>{window.addEventListener("cf_consent",function(e){let t={statistics:consent.performance??!0,marketing:consent.advertising??!0,preferences:consent.functional??!0,necessary:consent.necessary??!0};pmw.consent.api.updateSelectively(t)},!0)}},u=e=>{try{JSON.parse(e)}catch(e){return!1}return!0},k={getConsent:()=>{let e=pmw.getCookie("cookieyes-consent");if(e)return pmw.console.log("CookieYes CMP consent detected"),e=f(e),{statistics:e.analytics??!0,marketing:e.advertisement??!0,preferences:e.functional??!0,necessary:e.necessary??!0};const t=e=>{for(let t of e){let e=pmw.getCookie(t);if("yes"===e)return!0;if("no"===e)return!1}return!0},n={statistics:["cookielawinfo-checkbox-analytics","cookielawinfo-checkbox-analytiques","cookieyes-analytics"],marketing:["cookielawinfo-checkbox-advertisement","cookielawinfo-checkbox-performance","cookielawinfo-checkbox-publicite","cookieyes-advertisement"],preferences:["cookielawinfo-checkbox-functional","cookielawinfo-checkbox-preferences","cookieyes-functional"],necessary:["cookielawinfo-checkbox-necessary","cookielawinfo-checkbox-necessaire","cookieyes-necessary"]};return(e=>{for(let t in e)for(let n of e[t])if(pmw.getCookie(n))return!0;return!1})(n)?(pmw.console.log("CookieYes CMP consent detected"),{statistics:t(n.statistics),marketing:t(n.marketing),preferences:t(n.preferences),necessary:t(n.necessary)}):null},loadEventListeners:()=>{document.addEventListener("cookieyes_consent_update",e=>{let t={statistics:e.detail.accepted.includes("analytics"),marketing:e.detail.accepted.includes("advertisement"),preferences:e.detail.accepted.includes("functional"),necessary:e.detail.accepted.includes("necessary")};pmw.consent.api.updateSelectively(t)},!0)}},f=e=>{e=e.split(",");let t={};e.forEach(e=>{let[n,s]=e.split(":");t[n]=s}),e=t;for(let t in e)"yes"===e[t]?e[t]=!0:"no"!==e[t]&&""!==e[t]||(e[t]=!1);return e},y={getConsent:()=>{let e=pmw.getCookie("OptanonConsent");return e?(pmw.console.log("OneTrust CMP consent detected"),e=w(e),{statistics:e[2]??!0,marketing:e[4]??!0,preferences:e[3]??!0,necessary:e[1]??!0}):null},loadEventListeners:()=>{document.addEventListener("consent.onetrust",e=>{let t={statistics:e.detail.includes("2"),marketing:e.detail.includes("4"),preferences:e.detail.includes("3"),necessary:e.detail.includes("1")};pmw.consent.api.updateSelectively(t)},!0)}},w=e=>{let t=(e=decodeURIComponent(e)).split("&").reduce((e,t)=>{let[n,s]=t.split("=");return e[n]=s,e},{});return t.groups=t.groups.split(",").reduce((e,t)=>{let[n,s]=t.split(":");return e[n]="1"===s,e},{}),t.groups},_={getConsent:()=>{if(!C())return null;if(pmw.waitForLibrary("consentApi"),!window.consentApi)return null;pmw.console.log("Real Cookie Banner CMP consent detected");let e={statistics:void 0,marketing:void 0,preferences:!0,necessary:!0};return v.forEach(t=>{t.cookies.forEach(n=>{let s=window.consentApi.consentSync("http",n,"*");if(s?.cookie&&s?.cookieOptIn)switch(t.type){case"statistics":e.statistics=!0;break;case"marketing":e.marketing=!0;break;case"preferences":e.preferences=!0;break;case"necessary":e.necessary=!0}})}),e},loadEventListeners:()=>{document.addEventListener("RCB/OptIn/All",e=>{},!0)}},C=()=>{let e=document.cookie.split(";");for(let t=0;t<e.length;t++){if(e[t].trim().startsWith("real_cookie_banner"))return!0}return!1},v=[{service:"adroll-ads",type:"marketing",cookies:["__adroll_fpc","_ar_v4","_adroll"]},{service:"bing-ads",type:"marketing",cookies:["_uetsid","_uetvid"]},{service:"facebook-ads",type:"marketing",cookies:["_fbp"]},{service:"google-analytics",type:"statistics",cookies:["_ga","_gid","_gat","_gat_gtag_UA_*"]},{service:"google-optimize",type:"statistics",cookies:["_ga","_gid","_gat","_gat_gtag_UA_*"]},{service:"google-ads",type:"marketing",cookies:["_gcl_au","_gcl_aw","_gcl_dc","_gac_*"]},{service:"hotjar",type:"statistics",cookies:["_hj*","_hjid"]},{service:"linkedin-ads",type:"marketing",cookies:["_li_ss","_li_id","_li_mk_*"]},{service:"microsoft-ads",type:"marketing",cookies:["_uetsid","_uetvid"]},{service:"outbrain-ads",type:"marketing",cookies:[]},{service:"pinterest-ads",type:"marketing",cookies:["_pinterest_ct_ua","_pinterest_ct_rt","_pin_unauth","_derived_epik","_pinterest_sess"]},{service:"reddit-ads",type:"marketing",cookies:["_rdt_uuid"]},{service:"snapchat-ads",type:"marketing",cookies:["sc_at","sc_anonymous_id","sc_id","_scid","_scid_r"]},{service:"taboola-ads",type:"marketing",cookies:[]},{service:"tiktok-ads",type:"marketing",cookies:["_ttp","_ttclid","ttwid"]},{service:"twitter-ads",type:"marketing",cookies:["twitter_ads_id","twid","_twclid","muc_ads"]}],h=[o,{getConsent:()=>{let e=pmw.getCookie("borlabs-cookie");return e?(pmw.console.log("Borlabs Cookie CMP consent detected"),console.log("Pixel Manger: We deprecated direct support for Borlabs Cookie. Borlabs Cookie still can pass consent to PMW by using Google Consent Mode update calls which will be processd by the Pixel Manager."),e=decodeURI(e),e=JSON.parse(e),{statistics:e?.consents?.statistics??!0,marketing:e?.consents?.marketing??!0,preferences:!0,necessary:!0}):null},loadEventListeners:()=>{document.addEventListener("borlabs-cookie-consent-saved",()=>{},!0)}},l,{getConsent:()=>{let e=pmw.getCookie("cookie_notice_accepted");return e?(pmw.console.log("Cookie Compliance CMP (by hu-manity.co) consent detected"),e="true"===e,{statistics:e,marketing:e,preferences:e,necessary:!0}):(e=pmw.getCookie("hu-consent"),e?(pmw.console.log("Cookie Compliance CMP (by hu-manity.co) consent detected"),e=JSON.parse(e),{statistics:e.categories[3]??!0,marketing:e.categories[4]??!0,preferences:e.categories[2]??!0,necessary:e.categories[1]??!0}):null)},loadEventListeners:()=>{document.addEventListener("set-consent.hu",e=>{if(!e.detail.categories)return;let t={statistics:e.detail.categories[3],marketing:e.detail.categories[4],preferences:e.detail.categories[2],necessary:e.detail.categories[1]};pmw.consent.api.updateSelectively(t)},!0)}},{getConsent:()=>{let e=pmw.getCookie("CC_p_accepted_cookies");if(e){pmw.console.log("Cookie Confirm CMP consent detected");try{e=JSON.parse(e)}catch(e){return pmw.console.log("Cookie Confirm CMP: Error parsing cookie value",e),null}return Array.isArray(e)?{statistics:e.includes("analytics"),marketing:e.includes("marketing"),preferences:e.includes("functional"),necessary:!0}:null}return null},loadEventListeners:()=>{document.addEventListener("Cc_ConsentSet",e=>{const t=e.detail;let n={statistics:t.analytics??!1,marketing:t.marketing??!1,preferences:t.functional??!0,necessary:!0};pmw.consent.api.updateSelectively(n)},!0)}},{getConsent:()=>{let e=pmw.getCookie("CookieScriptConsent");return e?(pmw.console.log("Cookie Script CMP consent detected"),e=JSON.parse(e),"string"==typeof e.categories&&(e.categories=JSON.parse(e.categories)),e.action&&"reject"===e.action?{statistics:!1,marketing:!1,preferences:!1,necessary:!0}:e.categories&&e.categories.length>0?{statistics:e.categories.indexOf("performance")>=0,marketing:e.categories.indexOf("targeting")>=0,preferences:e.categories.indexOf("functionality")>=0,necessary:!0}:{statistics:!0,marketing:!0,preferences:!0,necessary:!0}):null},loadEventListeners:()=>{document.addEventListener("CookieScriptAccept",e=>{let t={statistics:e.detail.categories.includes("performance"),marketing:e.detail.categories.includes("targeting"),preferences:e.detail.categories.includes("functionality"),necessary:!0};pmw.consent.api.updateSelectively(t)},!0),document.addEventListener("CookieScriptAcceptAll",()=>{pmw.consent.api.acceptAll()},!0),document.addEventListener("CookieScriptReject",()=>{pmw.consent.api.revokeAll()},!0)}},p,m,k,{getConsent:()=>{let e=new RegExp("_iub_cs-\\d{8,}"),t=pmw.getCookieThatContainsRegex(e);return t?(pmw.console.log("Iubenda CMP consent detected"),t=decodeURIComponent(t),t=t.replace(/_iub_cs-.*=/,""),t=JSON.parse(t),{statistics:t.purposes[4]??!0,marketing:t.purposes[5]??!0,preferences:t.purposes[2]??!0,necessary:t.purposes[1]??!0}):null},loadEventListeners:()=>{window._iub&&pmw.consent.cmpConsentClickObserver({ids:["iubFooterBtn"],classes:["iubenda-cs-reject-btn","iubenda-cs-accept-btn"]})}},{getConsent:()=>{let e=pmw.getCookie("moove_gdpr_popup");return e?(pmw.console.log("GDPR Cookie Compliance CMP (by Moove Agency) consent detected"),e=JSON.parse(e),{statistics:"0"!==e.thirdparty,marketing:"0"!==e.advanced,preferences:!0,necessary:"0"!==e.strict}):null},loadEventListeners:()=>{if(!window.moove_frontend_gdpr_scripts)return;const e=document.querySelector(".mgbutton");e&&e.addEventListener("click",()=>{},!0),pmw.consent.cmpConsentClickObserver({classes:["moove-gdpr-infobar-allow-all","moove-gdpr-modal-allow-all","moove-gdpr-modal-save-settings"]})}},y,_,{getConsent:()=>{let e=localStorage.getItem("termly_gtm_template_default_consents");return!!e&&(pmw.console.log("Termly CMP consent detected"),e=JSON.parse(e),{statistics:"denied"!==e.analytics_storage,marketing:"denied"!==e.ad_storage,preferences:"denied"!==e.functionality_storage,necessary:"denied"!==e.security_storage})},loadEventListeners:()=>{document.addEventListener("termlyConsent",function(e){const t=["analytics","advertising","performance"];t.includes("analytics")&&t.includes("advertising")&&t.includes("performance")?pmw.consent.api.acceptAll():t.includes("analytics")||t.includes("advertising")||t.includes("performance")?pmw.consent.api.updateSelectively({statistics:t.includes("analytics"),marketing:t.includes("advertising"),preferences:t.includes("performance"),necessary:t.includes("essential")}):pmw.consent.api.revokeAll()},!0)}},{getConsent:()=>{let e=window.localStorage.getItem("ucData");return e?(pmw.console.log("Usercentrics CMP consent detected"),e=JSON.parse(e).gcm,{statistics:"denied"!==e.analyticsStorage,marketing:"denied"!==e.adStorage,preferences:!0,necessary:!0}):null},loadEventListeners:()=>{document.addEventListener("UC_UI_CMP_EVENT",t=>{if("ACCEPT_ALL"===t.detail.type&&pmw.consent.api.acceptAll(),"DENY_ALL"===t.detail.type&&pmw.consent.api.revokeAll(),"SAVE"===t.detail.type){let t=JSON.parse(e.currentTarget.localStorage.ucData).gcm;t&&pmw.consent.api.updateSelectively({statistics:"granted"===t.analyticsStorage,marketing:"granted"===t.adStorage,preferences:!0,necessary:!0})}},!0)}},{getConsent:()=>{let e=pmw.getCookie("wpautoterms-cookies-notice");return e&&"1"===e?(pmw.console.log("WP AutoTerms CMP consent detected"),{statistics:!0,marketing:!0,preferences:!0,necessary:!0}):null},loadEventListeners:()=>{let e=document.querySelectorAll(".wpautoterms-notice-close")[0];e&&e.addEventListener("click",e=>{pmw.consent.api.acceptAll()},!0)}},{getConsent:()=>{if(pmw.getCookieThatContainsRegex(/^wp_consent_/))return pmw.console.log("WP Consent API CMP consent detected"),{statistics:"deny"!==pmw.getCookie("wp_consent_statistics"),marketing:"deny"!==pmw.getCookie("wp_consent_marketing"),preferences:"deny"!==pmw.getCookie("wp_consent_preferences"),necessary:"deny"!==pmw.getCookie("wp_consent_functional")}},loadEventListeners:()=>{document.addEventListener("wp_listen_for_consent_change",e=>{const t=e.detail;let n={statistics:"deny"!==t.statistics,marketing:"deny"!==t.marketing,preferences:"deny"!==t.preferences,necessary:"deny"!==t.functional};pmw.consent.api.updateSelectively(n)},!0)}},{getConsent:()=>{let e=pmw.getCookie("wpl_user_preference");return e?(pmw.console.log("WP Cookie Consent CMP (by wpeka.com) consent detected"),e=JSON.parse(e),{statistics:"no"!==e.analytics,marketing:"no"!==e.marketing,preferences:"no"!==e.preferences,necessary:"no"!==e.necessary}):null},loadEventListeners:()=>{["cookie_action_accept","cookie_action_reject"].forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("click",()=>{},!0)})}}];let b={categories:{statistics:!0,marketing:!0,preferences:!0,necessary:!0},visitorHasChosen:!1,get:(e=null)=>{if(null===e)return b;let t={};for(let n of e)t[n]=b[n];return t},set:e=>{for(let t in e)b[t]=e[t]}};const L=async()=>{S(),P(),E(),await N(),R()},E=()=>{let e=O();e&&(pmw.consent.categories.set(e),pmw.consent.settings.set({visitorHasChosen:!0}))},S=()=>{for(let e of h)"function"==typeof e.loadEventListeners&&e.loadEventListeners()},P=()=>{let e=!pmw.consent.explicitConsentModeActive();pmw.consent.categories.set({statistics:e,marketing:e,preferences:e,necessary:!0})},M=()=>pmwDataLayer?.general?.consent_management?.explicit_consent;pmw.getConsentValues=()=>pmw.consent.settings.get();const A={set:({statistics:e=pmw.consent.settings.get().statistics,marketing:t=pmw.consent.settings.get().marketing,preferences:n=pmw.consent.settings.get().preferences,necessary:s=pmw.consent.settings.get().necessary})=>{b.categories.statistics=e,b.categories.marketing=t,b.categories.preferences=n,b.categories.necessary=s},get:(e=null)=>{if(null===e)return b.categories;let t={};for(let n of e)t[n]=b.categories[n];return t}},O=()=>{const e="pmw_cookie_consent";let t=pmw.retrieveData(e,!0)||pmw.getCookie(e);if(t)return t="object"==typeof t?t:JSON.parse(t),t=x(t),t;for(let e of h){if("function"!=typeof e.getConsent)continue;let t=e.getConsent();if(t)return t}return null},x=e=>e.hasOwnProperty("analytics")||e.hasOwnProperty("ads")?(e.hasOwnProperty("analytics")&&(e.statistics=e.analytics,delete e.analytics),e.hasOwnProperty("ads")&&(e.marketing=e.ads,delete e.ads),e.preferences=!0,e.necessary=!0,e):e,N=async()=>{if(!M())return;if(pmw.consent.settings.get().visitorHasChosen)return;if(!pmwDataLayer?.general?.consent_management?.restricted_regions)return;const e=await pmw.getBrowserGeo();if(T(e))return pmw.console.log("The country and/or region is restricted. Set the consent values to false and block the pixels.",e),void pmw.consent.categories.set({statistics:!1,marketing:!1,preferences:!1,necessary:!0});pmw.console.log("The country and/or region is not restricted. Set the consent values to true and fire the pixels.",e),pmw.consent.categories.set({statistics:!0,marketing:!0,preferences:!0,necessary:!0})},T=e=>null===e||(!(!e.countryCode||!pmwDataLayer?.general?.consent_management?.restricted_regions.includes(e.countryCode))||!(!e.regionCode||!pmwDataLayer?.general?.consent_management?.restricted_regions.includes(e.regionCode))),I=(e,t)=>pmw.consent.categories.get()[e]?(pmw.console.log(`The category ${e} has been approved. Loading the ${t} pixel.`),!0):(J(e,t),!1),J=(e,t)=>{let n=M()?"explicit":"implicit";console.log(`Pixel Manager: The pixel has not loaded because you have not given consent for it yet. - mode: ${n}, category: ${e}, pixel: ${t}`)},R=()=>{document.dispatchEvent(new Event("pmw_cookie_consent_management_loaded")),document.dispatchEvent(new Event("pmwCookieConsentManagementLoaded")),pmw.console.log("Loaded consent category settings: ",pmw.consent.categories.get())},z=({ids:e=[],classes:t=[]})=>{t=t.map(e=>e.startsWith(".")?e:"."+e);new MutationObserver((n,s)=>{for(let o of n)if(o.addedNodes.length){if(t.length>0){document.querySelectorAll(t.join(", ")).forEach(e=>{e.addEventListener("click",()=>{location.reload()}),s.disconnect()})}e.length>0&&e.forEach(e=>{const t=document.getElementById(e);t&&(t.addEventListener("click",()=>{location.reload()}),s.disconnect())})}}).observe(document.body,{childList:!0,subtree:!0})}}}]);
//# sourceMappingURL=consent-management.9d45b6cb.chunk.min.js.map