{"version":3,"file":"pixel-google.87d84819.chunk.min.js","mappings":"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","sources":["webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/analytics/adapter.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/base/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/base/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/base/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/ads/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/analytics/ga4/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/analytics/ga4/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/ads/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/ads/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/analytics/ga4/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/ads/adapter.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/analytics/loader.js"],"sourcesContent":["/**\n * Load Google\n */\n\n// Load base\nrequire(\"./base/loader\")\n\n//Load additional Google libraries\nrequire(\"./ads/loader\")\nrequire(\"./analytics/loader\")\n\n","/**\n * Google Analytics GA4 Adapter\n * \n * Adapts event data into Google Analytics GA4 format.\n * \n * Documentation:\n * - https://developers.google.com/analytics/devguides/collection/ga4/ecommerce\n * \n * @since 1.51.0\n */\n\n(function (pmw, $, undefined) {\n\n\tclass GoogleAnalyticsAdapter {\n\t\t\n\t\t/**\n\t\t * Adapt event data to Google Analytics GA4 format\n\t\t * \n\t\t * @param {object} eventData - Event-specific data (product, order, etc.)\n\t\t * @param {string} eventName - Standardized event name\n\t\t * @param {object} context - Event context (user, page, etc.)\n\t\t * @returns {object|null} Adapted data for GA4 or null if pixel not loaded\n\t\t */\n\t\tadapt(eventData, eventName, context) {\n\t\t\t\n\t\t\t// Check if GA4 is loaded\n\t\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\tconst eventMap = {\n\t\t\t\t'view_item_list': () => this.adaptViewItemList(eventData),\n\t\t\t\t'select_item': () => this.adaptSelectItem(eventData),\n\t\t\t\t'add_to_cart': () => this.adaptAddToCart(eventData),\n\t\t\t\t'view_item': () => this.adaptViewItem(eventData),\n\t\t\t\t'add_to_wishlist': () => this.adaptAddToWishlist(eventData),\n\t\t\t\t'remove_from_cart': () => this.adaptRemoveFromCart(eventData),\n\t\t\t\t'begin_checkout': () => this.adaptBeginCheckout(eventData),\n\t\t\t\t'add_shipping_info': () => this.adaptAddShippingInfo(eventData),\n\t\t\t\t'add_payment_info': () => this.adaptAddPaymentInfo(eventData),\n\t\t\t\t'view_cart': () => this.adaptViewCart(eventData),\n\t\t\t\t'search': () => this.adaptSearch(eventData),\n\t\t\t\t'purchase': () => this.adaptPurchase(eventData),\n\t\t\t};\n\t\t\t\n\t\t\tif (!eventMap[eventName]) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\treturn eventMap[eventName]();\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt view_item_list event\n\t\t * https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_item_list\n\t\t */\n\t\tadaptViewItemList(eventData) {\n\t\t\tif (!eventData?.product) return null;\n\t\t\t\n\t\t\treturn {\n\t\t\t\tevent_name: 'view_item_list',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: pmwDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t\t\titems: [pmw.ga4GetFullProductItemData(eventData.product)],\n\t\t\t\t\titem_list_name: pmwDataLayer.shop.list_name,\n\t\t\t\t\titem_list_id: pmwDataLayer.shop.list_id,\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt select_item event\n\t\t * https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#select_item\n\t\t */\n\t\tadaptSelectItem(eventData) {\n\t\t\tif (!eventData?.product) return null;\n\t\t\t\n\t\t\treturn {\n\t\t\t\tevent_name: 'select_item',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: pmwDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t\t\titems: [pmw.ga4GetFullProductItemData(eventData.product)],\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt add_to_cart event\n\t\t * https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#add_to_cart\n\t\t */\n\t\tadaptAddToCart(eventData) {\n\t\t\tif (!eventData?.product) return null;\n\t\t\t\n\t\t\tconst product = eventData.product;\n\t\t\t\n\t\t\treturn {\n\t\t\t\tevent_name: 'add_to_cart',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: pmwDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t\t\tcurrency: pmwDataLayer.shop.currency,\n\t\t\t\t\tvalue: product.price * product.quantity,\n\t\t\t\t\titems: [pmw.ga4GetFullProductItemData(product)],\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt view_item event\n\t\t * https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_item\n\t\t */\n\t\tadaptViewItem(eventData) {\n\t\t\tconst data = {\n\t\t\t\tevent_name: 'view_item',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: pmwDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tif (eventData?.product) {\n\t\t\t\tdata.event_data.currency = pmwDataLayer.shop.currency;\n\t\t\t\tdata.event_data.items = [pmw.ga4GetFullProductItemData(eventData.product)];\n\t\t\t}\n\t\t\t\n\t\t\treturn data;\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt add_to_wishlist event\n\t\t * https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#add_to_wishlist\n\t\t */\n\t\tadaptAddToWishlist(eventData) {\n\t\t\tif (!eventData?.product) return null;\n\t\t\t\n\t\t\tconst product = eventData.product;\n\t\t\t\n\t\t\treturn {\n\t\t\t\tevent_name: 'add_to_wishlist',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: pmwDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t\t\tcurrency: pmwDataLayer.shop.currency,\n\t\t\t\t\tvalue: product.price * product.quantity,\n\t\t\t\t\titems: [pmw.ga4GetFullProductItemData(product)],\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt remove_from_cart event\n\t\t * https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#remove_from_cart\n\t\t */\n\t\tadaptRemoveFromCart(eventData) {\n\t\t\tif (!eventData?.product) return null;\n\t\t\t\n\t\t\tconst product = eventData.product;\n\t\t\t\n\t\t\treturn {\n\t\t\t\tevent_name: 'remove_from_cart',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: pmwDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t\t\tcurrency: pmwDataLayer.shop.currency,\n\t\t\t\t\tvalue: product.price * product.quantity,\n\t\t\t\t\titems: [pmw.ga4GetFullProductItemData(product)],\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt begin_checkout event\n\t\t * https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#begin_checkout\n\t\t */\n\t\tadaptBeginCheckout(eventData) {\n\t\t\treturn {\n\t\t\t\tevent_name: 'begin_checkout',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: pmwDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t\t\tcurrency: pmwDataLayer.shop.currency,\n\t\t\t\t\tvalue: pmw.getCartValue(),\n\t\t\t\t\titems: pmw.getCartItemsGa4(),\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt add_shipping_info event\n\t\t */\n\t\tadaptAddShippingInfo(eventData) {\n\t\t\tconst data = {\n\t\t\t\tevent_name: 'add_shipping_info',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: pmwDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t\t\tcurrency: pmwDataLayer.shop.currency,\n\t\t\t\t\tvalue: pmw.getCartValue(),\n\t\t\t\t\titems: pmw.getCartItemsGa4(),\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tif (eventData?.shippingTier?.text) {\n\t\t\t\tdata.event_data.shipping_tier = eventData.shippingTier.text;\n\t\t\t}\n\t\t\t\n\t\t\treturn data;\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt add_payment_info event\n\t\t */\n\t\tadaptAddPaymentInfo(eventData) {\n\t\t\tconst data = {\n\t\t\t\tevent_name: 'add_payment_info',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: pmwDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t\t\tcurrency: pmwDataLayer.shop.currency,\n\t\t\t\t\tvalue: pmw.getCartValue(),\n\t\t\t\t\titems: pmw.getCartItemsGa4(),\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tif (eventData?.paymentType?.text) {\n\t\t\t\tdata.event_data.payment_type = eventData.paymentType.text;\n\t\t\t}\n\t\t\t\n\t\t\treturn data;\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt view_cart event\n\t\t * https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_cart\n\t\t */\n\t\tadaptViewCart(eventData) {\n\t\t\tif (jQuery.isEmptyObject(pmwDataLayer.cart)) return null;\n\t\t\t\n\t\t\tlet products = [];\n\t\t\tlet cartValue = 0;\n\t\t\t\n\t\t\tObject.values(pmwDataLayer.cart).forEach(product => {\n\t\t\t\tproducts.push(pmw.ga4GetFullProductItemData(product));\n\t\t\t\tcartValue = cartValue + product.quantity * product.price;\n\t\t\t});\n\t\t\t\n\t\t\treturn {\n\t\t\t\tevent_name: 'view_cart',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: pmwDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t\t\tcurrency: pmwDataLayer.shop.currency,\n\t\t\t\t\tvalue: cartValue.toFixed(2),\n\t\t\t\t\titems: products,\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt search event\n\t\t */\n\t\tadaptSearch(eventData) {\n\t\t\tlet products = [];\n\t\t\t\n\t\t\tObject.values(pmwDataLayer.products).forEach(product => {\n\t\t\t\tproducts.push(pmw.ga4GetFullProductItemData(product));\n\t\t\t});\n\t\t\t\n\t\t\treturn {\n\t\t\t\tevent_name: 'view_search_results',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: pmwDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t\t\tsearch_term: pmw.getSearchTermFromUrl(),\n\t\t\t\t\titems: products,\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adapt purchase event\n\t\t */\n\t\tadaptPurchase(eventData) {\n\t\t\t// Skip if Measurement Protocol is active (server-side tracking)\n\t\t\tif (pmwDataLayer?.pixels?.google?.analytics?.ga4?.mp_active) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\tconst data = {\n\t\t\t\tevent_name: 'purchase',\n\t\t\t\tevent_data: {\n\t\t\t\t\tsend_to: [pmwDataLayer.pixels.google.analytics.ga4.measurement_id],\n\t\t\t\t\ttransaction_id: pmwDataLayer.order.number,\n\t\t\t\t\taffiliation: pmwDataLayer.order.affiliation,\n\t\t\t\t\tcurrency: pmwDataLayer.order.currency,\n\t\t\t\t\tvalue: pmwDataLayer.order.value.total,\n\t\t\t\t\tdiscount: pmwDataLayer.order.discount,\n\t\t\t\t\ttax: pmwDataLayer.order.tax,\n\t\t\t\t\tshipping: pmwDataLayer.order.shipping,\n\t\t\t\t\tcoupon: pmwDataLayer.order.coupon,\n\t\t\t\t\titems: pmw.getGA4OrderItems(),\n\t\t\t\t\tpayment_type: pmwDataLayer.order.payment_type,\n\t\t\t\t\tpayment_type_title: pmwDataLayer.order.payment_type_title,\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\t// Add custom parameters if present\n\t\t\tif (pmwDataLayer?.order?.custom_parameters) {\n\t\t\t\tObject.keys(pmwDataLayer.order.custom_parameters).forEach(key => {\n\t\t\t\t\tdata.event_data[key] = pmwDataLayer.order.custom_parameters[key];\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\treturn data;\n\t\t}\n\t}\n\t\n\t// Register the adapter\n\tpmw.registerAdapter('google_analytics', new GoogleAnalyticsAdapter(), {\n\t\tisActive: () => pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id ? true : false\n\t});\n\t\n}(window.pmw = window.pmw || {}, jQuery));\n","/**\n * Load Google base functions\n */\n\n(function (pmw, $, undefined) {\n\n\tpmw.googleConfigConditionsMet = ({type = null, log = false}) => {\n\n\t\t// Always returns true if Google Consent Mode is active\n\t\tif (pmwDataLayer?.pixels?.google?.consent_mode?.is_active) {\n\t\t\tif (log) pmw.console.log(\"Google Consent Mode is active. Loading the Google pixel.\");\n\t\t\treturn true;\n\t\t}\n\n\t\t// If a type is passed, return true if the user has given consent to that type\n\t\t// or false if the user has not given consent to that type.\n\t\tif (type) {\n\t\t\tif (!!pmw.consent.categories.get()[type]) {\n\t\t\t\tif (log) pmw.console.log(\"The category \" + type + \" has been approved. Loading the Google pixel.\");\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (log) pmw.console.log(\"The category \" + type + \" has been denied. Not loading the Google pixel.\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// If no type is passed, return true if the user has given consent to the statistics or marketing categories.\n\t\tif (!!(pmw.consent.categories.get().marketing || pmw.consent.categories.get().statistics)) {\n\t\t\tif (log) pmw.console.log(\"The categories statistics and/or marketing are approved. Loading the Google pixel.\");\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tpmw.fireGtagGoogleAds = () => {\n\t\ttry {\n\t\t\tpmwDataLayer.pixels.google.ads.state = \"loading\";\n\n\t\t\tif (pmwDataLayer?.pixels?.google?.enhanced_conversions?.is_active) {\n\t\t\t\tObject.keys(pmwDataLayer.pixels.google.ads.conversion_ids).forEach((key) => {\n\t\t\t\t\tgtag(\"config\", key, {\"allow_enhanced_conversions\": true});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tObject.keys(pmwDataLayer.pixels.google.ads.conversion_ids).forEach((key) => {\n\t\t\t\t\tgtag(\"config\", key);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (pmwDataLayer?.pixels?.google?.ads?.conversion_ids && pmwDataLayer?.pixels?.google?.ads?.phone_conversion_label && pmwDataLayer?.pixels?.google?.ads?.phone_conversion_number) {\n\t\t\t\tgtag(\"config\", Object.keys(pmwDataLayer.pixels.google.ads.conversion_ids)[0] + \"/\" + pmwDataLayer.pixels.google.ads.phone_conversion_label, {\n\t\t\t\t\tphone_conversion_number: pmwDataLayer.pixels.google.ads.phone_conversion_number,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tpmwDataLayer.pixels.google.ads.state = \"ready\";\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\t// https://developers.google.com/tag-platform/gtagjs/reference\n\tpmw.fireGtagGoogleAnalyticsGA4 = () => {\n\n\t\ttry {\n\t\t\tpmwDataLayer.pixels.google.analytics.ga4.state = \"loading\";\n\n\t\t\tlet parameters = pmwDataLayer.pixels.google.analytics.ga4.parameters;\n\n\t\t\tif (pmwDataLayer?.pixels?.google?.analytics?.ga4?.debug_mode) {\n\t\t\t\tparameters.debug_mode = true;\n\t\t\t}\n\n\t\t\tgtag(\"config\", pmwDataLayer.pixels.google.analytics.ga4.measurement_id, parameters);\n\n\t\t\tpmwDataLayer.pixels.google.analytics.ga4.state = \"ready\";\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\t/**\n\t * Check if Google is active\n\t *\n\t * @returns {boolean}\n\t */\n\tpmw.isGoogleActive = () => {\n\n\t\t// If GA4 is active, return true\n\t\tif (pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return true;\n\n\t\t// If Google Ads is active, return true\n\t\tif (!jQuery.isEmptyObject(pmwDataLayer?.pixels?.google?.ads?.conversion_ids)) return true;\n\n\t\treturn false;\n\t};\n\n\tpmw.getGoogleGtagId = () => {\n\n\t\tif (pmwDataLayer?.pixels?.google?.tag_id) {\n\t\t\treturn pmwDataLayer.pixels.google.tag_id;\n\t\t}\n\n\t\tif (\n\t\t\tpmwDataLayer?.pixels?.google?.ads?.conversion_ids\n\t\t\t&& Object.keys(pmwDataLayer.pixels.google.ads.conversion_ids)[0]\n\t\t) {\n\t\t\treturn Object.keys(pmwDataLayer.pixels.google.ads.conversion_ids)[0];\n\t\t}\n\n\t\tif (pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) {\n\t\t\treturn pmwDataLayer.pixels.google.analytics.ga4.measurement_id;\n\t\t}\n\n\t\treturn \"\";\n\t};\n\n\t/**\n\t * Session storage key for caching the GTG handler type\n\t */\n\tconst GTG_HANDLER_CACHE_KEY = \"gtg_h\";\n\n\t/**\n\t * Flag to prevent multiple detection requests on the same page\n\t */\n\tlet gtgDetectionInProgress = false;\n\n\t/**\n\t * Valid handler types\n\t */\n\tconst VALID_HANDLERS = [\"external\", \"standalone\", \"wordpress\"];\n\n\t/**\n\t * Get the GTG handler from session cache\n\t *\n\t * Server-side detection is unreliable for Cloudflare (server-to-server requests bypass CDN).\n\t * Only use session storage cache from previous browser-side detection.\n\t *\n\t * @returns {string|null} The handler type or null if not cached\n\t */\n\tconst getGtgHandler = () => {\n\t\t// Session storage cache from previous detection\n\t\ttry {\n\t\t\tconst cached = pmw.retrieveData(GTG_HANDLER_CACHE_KEY);\n\t\t\tif (cached && VALID_HANDLERS.includes(cached)) {\n\t\t\t\treturn cached;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// Storage not available\n\t\t}\n\n\t\treturn null;\n\t};\n\n\t/**\n\t * Cache the GTG handler type in _pmw_session_data\n\t *\n\t * @param {string} handler - The handler type (e.g., \"wordpress\", \"isolated\", \"external\")\n\t */\n\tconst cacheGtgHandler = (handler) => {\n\t\ttry {\n\t\t\tpmw.storeData(GTG_HANDLER_CACHE_KEY, handler);\n\t\t} catch (e) {\n\t\t\t// Silently fail if storage is not available\n\t\t}\n\t};\n\n\t/**\n\t * Detect which GTG handler is responding (synchronous/blocking)\n\t *\n\t * Makes preflight requests to detect the optimal proxy configuration.\n\t *\n\t * Detection priority (fastest to slowest):\n\t * 1. External proxy (Cloudflare) via measurement_path - fastest\n\t * 2. Standalone proxy via proxy_url - fast, bypasses WordPress\n\t * 3. WordPress proxy via measurement_path - slowest, full WordPress load\n\t *\n\t * This function returns a Promise that resolves to the handler type.\n\t *\n\t * Possible handlers:\n\t * - \"external\": External proxy like Cloudflare (fastest) - use measurement_path\n\t * - \"standalone\": Standalone proxy PHP file (fast, no WordPress) - use proxy_url\n\t * - \"wordpress\": WordPress fallback (slowest) - use measurement_path\n\t *\n\t * @returns {Promise<string>} The detected handler type\n\t */\n\tconst detectGtgHandler = async () => {\n\t\t// Prevent multiple detection requests on the same page\n\t\tif (gtgDetectionInProgress) {\n\t\t\t// Wait for existing detection to complete\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tconst checkInterval = setInterval(() => {\n\t\t\t\t\tconst cached = getGtgHandler();\n\t\t\t\t\tif (cached) {\n\t\t\t\t\t\tclearInterval(checkInterval);\n\t\t\t\t\t\tresolve(cached);\n\t\t\t\t\t}\n\t\t\t\t}, 10);\n\t\t\t\t// Timeout after 2 seconds\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tclearInterval(checkInterval);\n\t\t\t\t\tresolve(\"wordpress\");\n\t\t\t\t}, 2000);\n\t\t\t});\n\t\t}\n\t\t\n\t\tgtgDetectionInProgress = true;\n\n\t\tconst tagGateway = pmwDataLayer?.pixels?.google?.tag_gateway;\n\t\t\n\t\t// Priority 1: Check measurement_path first for Cloudflare (external proxy)\n\t\t// Cloudflare won't send X-PMW-GTG-Handler header, so we can detect it\n\t\tif (tagGateway?.measurement_path) {\n\t\t\tconst healthUrl = tagGateway.measurement_path + \"/healthy\";\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(healthUrl, {method: \"GET\", cache: \"no-store\"});\n\t\t\t\tconst handler = response.headers.get(\"X-PMW-GTG-Handler\");\n\n\t\t\t\t// If no handler header, it's likely Cloudflare (external)\n\t\t\t\tif (!handler) {\n\t\t\t\t\tcacheGtgHandler(\"external\");\n\t\t\t\t\tpmw.console.log(\"GTG handler: external (CDN/edge proxy)\");\n\t\t\t\t\treturn \"external\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// If WordPress handler detected on measurement_path, continue to check standalone\n\t\t\t\tif (handler === \"wordpress\") {\n\t\t\t\t\tpmw.console.log(\"WordPress proxy detected on measurement_path, checking for standalone proxy...\");\n\t\t\t\t\t// Fall through to check standalone proxy\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// If standalone detected on measurement_path (rare), use it\n\t\t\t\tif (handler === \"standalone\") {\n\t\t\t\t\tcacheGtgHandler(\"standalone\");\n\t\t\t\t\tpmw.console.log(\"GTG handler: standalone (direct PHP proxy via measurement_path)\");\n\t\t\t\t\treturn \"standalone\";\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tpmw.console.log(\"measurement_path not accessible:\", e.message);\n\t\t\t\t// Fall through to check isolated proxy\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Priority 2: Check proxy_url for standalone proxy (direct PHP file access)\n\t\t// This works when measurement_path goes through WordPress or isn't available\n\t\tif (tagGateway?.proxy_url) {\n\t\t\tconst healthUrl = tagGateway.proxy_url + \"?healthCheck=1\";\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(healthUrl, {method: \"GET\", cache: \"no-store\"});\n\t\t\t\tconst handler = response.headers.get(\"X-PMW-GTG-Handler\");\n\n\t\t\t\tif (handler === \"standalone\") {\n\t\t\t\t\tcacheGtgHandler(\"standalone\");\n\t\t\t\t\tpmw.console.log(\"GTG handler: standalone (direct PHP proxy)\");\n\t\t\t\t\treturn \"standalone\";\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tpmw.console.log(\"proxy_url not accessible:\", e.message);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Priority 3: Fallback to WordPress proxy (via measurement_path)\n\t\tcacheGtgHandler(\"wordpress\");\n\t\tpmw.console.log(\"GTG handler: wordpress (WordPress fallback proxy)\");\n\t\treturn \"wordpress\";\n\t};\n\n\t/**\n\t * Get the Google Tag Gateway URL for loading gtag.js\n\t *\n\t * This is now an async function that waits for handler detection\n\t * before returning the optimal URL.\n\t *\n\t * Priority (fastest to slowest):\n\t * - \"external\" (Cloudflare) -> use measurement_path (fastest)\n\t * - \"standalone\" -> use proxy_url (fast, bypasses WordPress)\n\t * - \"wordpress\" -> use measurement_path (slowest, full WordPress load)\n\t *\n\t * @returns {Promise<string>} The gateway URL or empty string if not configured.\n\t */\n\tpmw.getGoogleTagGatewayUrlAsync = async () => {\n\n\t\tconst tagId = pmw.getGoogleGtagId();\n\t\tif (!tagId) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tconst tagGateway = pmwDataLayer?.pixels?.google?.tag_gateway;\n\t\tif (!tagGateway?.measurement_path) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\t// Check server-provided or cached handler first\n\t\tlet handler = getGtgHandler();\n\t\t\n\t\t// If no handler available, do async detection\n\t\tif (!handler) {\n\t\t\thandler = await detectGtgHandler();\n\t\t}\n\n\t\t// External (Cloudflare) - use measurement_path (fastest)\n\t\tif (handler === \"external\") {\n\t\t\tpmw.console.log(\"Using measurement_path for GTG (external/CDN proxy)\");\n\t\t\treturn tagGateway.measurement_path + \"/?id=\" + encodeURIComponent(tagId) + \"&s=/gtag/js\";\n\t\t}\n\t\t\n\t\t// Standalone proxy - use proxy_url (fast, bypasses WordPress)\n\t\tif (handler === \"standalone\" && tagGateway.proxy_url) {\n\t\t\tpmw.console.log(\"Using proxy_url for GTG (standalone proxy)\");\n\t\t\treturn tagGateway.proxy_url + \"?id=\" + encodeURIComponent(tagId) + \"&s=/gtag/js\";\n\t\t}\n\n\t\t// WordPress fallback - use measurement_path (slowest)\n\t\tpmw.console.log(\"Using measurement_path for GTG (WordPress fallback proxy)\");\n\t\treturn tagGateway.measurement_path + \"/?id=\" + encodeURIComponent(tagId) + \"&s=/gtag/js\";\n\t};\n\n\t/**\n\t * Get the Google Tag Gateway URL (synchronous version for backward compatibility)\n\t * \n\t * Uses server-provided or cached value if available, otherwise falls back to measurement_path.\n\t * The async version should be preferred for first page loads.\n\t *\n\t * @returns {string} The gateway URL or empty string if not configured.\n\t */\n\tgetGoogleTagGatewayUrl = () => {\n\n\t\tconst tagId = pmw.getGoogleGtagId();\n\t\tif (!tagId) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tconst tagGateway = pmwDataLayer?.pixels?.google?.tag_gateway;\n\t\tif (!tagGateway?.measurement_path) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\t// Check server-provided or cached handler to determine which URL to use\n\t\tconst handler = getGtgHandler();\n\n\t\t// If external (Cloudflare) is detected, always use measurement_path\n\t\tif (handler === \"external\") {\n\t\t\treturn tagGateway.measurement_path + \"/?id=\" + encodeURIComponent(tagId) + \"&s=/gtag/js\";\n\t\t}\n\n\t\t// If isolated detected, use direct proxy URL for best performance\n\t\tif (handler === \"isolated\" && tagGateway.proxy_url) {\n\t\t\treturn tagGateway.proxy_url + \"?id=\" + encodeURIComponent(tagId) + \"&s=/gtag/js\";\n\t\t}\n\n\t\t// Default: use measurement_path (for WordPress fallback or unknown handler)\n\t\treturn tagGateway.measurement_path + \"/?id=\" + encodeURIComponent(tagId) + \"&s=/gtag/js\";\n\t};\n\n\t/**\n\t * Get the Google tracking URL (async version)\n\t * \n\t * @returns {Promise<string>} The tracking URL\n\t */\n\tpmw.getGoogleTrackingUrlAsync = async () => {\n\n\t\t// Skip the gateway proxy for bot user agents to reduce server load\n\t\t// Bots will use the standard googletagmanager.com URL directly\n\t\tif (pmw.isBotUserAgent()) {\n\t\t\treturn getGoogleStandardTrackingUrl();\n\t\t}\n\n\t\t// Try to use the Google Tag Gateway (local proxy to FPS)\n\t\tconst gatewayUrl = await pmw.getGoogleTagGatewayUrlAsync();\n\t\tif (gatewayUrl) {\n\t\t\treturn gatewayUrl;\n\t\t}\n\n\t\treturn getGoogleStandardTrackingUrl();\n\t};\n\n\tgetGoogleTrackingUrl = () => {\n\n\t\t// Skip the gateway proxy for bot user agents to reduce server load\n\t\t// Bots will use the standard googletagmanager.com URL directly\n\t\tif (pmw.isBotUserAgent()) {\n\t\t\treturn getGoogleStandardTrackingUrl();\n\t\t}\n\n\t\t// Try to use the Google Tag Gateway (local proxy to FPS)\n\t\tconst gatewayUrl = getGoogleTagGatewayUrl();\n\t\tif (gatewayUrl) {\n\t\t\treturn gatewayUrl;\n\t\t}\n\n\t\treturn getGoogleStandardTrackingUrl();\n\t};\n\n\tgetGoogleStandardTrackingUrl = () => {\n\t\treturn \"https://www.googletagmanager.com/gtag/js?id=\" + pmw.getGoogleGtagId();\n\t}\n\n\tpmw.loadGoogle = async () => {\n\n\t\tif (!pmw.isGoogleActive()) {\n\t\t\treturn;\n\t\t}\n\n\t\tpmwDataLayer.pixels.google.state = \"loading\";\n\n\t\t// Wait for GTG handler detection before determining the URL\n\t\t// This ensures we use the correct proxy URL even on first page load\n\t\tconst trackingUrl = await pmw.getGoogleTrackingUrlAsync();\n\n\t\tpmw.console.log(\"Loading Google gtag.js from\", trackingUrl.startsWith(\"/\") ? window.location.origin + trackingUrl : trackingUrl);\n\n\t\tpmw.loadScriptAndCacheIt(trackingUrl, getGoogleStandardTrackingUrl())\n\t\t\t.then((script, textStatus) => {\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// If Google TCF is active, output the TCF script\n\t\t\t\t\t// https://developers.google.com/tag-platform/security/guides/implement-TCF-strings\n\t\t\t\t\tif (pmwDataLayer?.pixels?.google?.tcf_support) {\n\t\t\t\t\t\twindow[\"gtag_enable_tcf_support\"] = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Initiate Google dataLayer and gtag\n\t\t\t\t\twindow.dataLayer = window.dataLayer || [];\n\n\t\t\t\t\twindow.gtag = function gtag() {\n\n\t\t\t\t\t\tpmw.console.log(\"gtag called with\", arguments);\n\t\t\t\t\t\tpmw.consent.api.processExternalGcmConsentUpdate_experimental(arguments);\n\n\t\t\t\t\t\t// Delete the source property from the arguments object\n\t\t\t\t\t\t// It is a helper property that is not needed by gtag for regular calls\n\t\t\t\t\t\tif (arguments.length === 3 && arguments[2]?.source) {\n\t\t\t\t\t\t\tdelete arguments[2].source;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataLayer.push(arguments);\n\t\t\t\t\t};\n\n\t\t\t\t\t// Google Consent Mode\n\t\t\t\t\tif (pmwDataLayer?.pixels?.google?.consent_mode?.is_active) {\n\n\t\t\t\t\t\tlet google_consent_settings = {\n\t\t\t\t\t\t\tad_personalization     : pmw.consent.categories.get().marketing ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tad_storage             : pmw.consent.categories.get().marketing ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tad_user_data           : pmw.consent.categories.get().marketing ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tanalytics_storage      : pmw.consent.categories.get().statistics ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tfunctionality_storage  : pmw.consent.categories.get().preferences ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tpersonalization_storage: pmw.consent.categories.get().preferences ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tsecurity_storage       : pmw.consent.categories.get().necessary ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\twait_for_update        : pmwDataLayer.pixels.google.consent_mode.wait_for_update,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (pmwDataLayer?.general?.consent_management?.restricted_regions) {\n\t\t\t\t\t\t\tgoogle_consent_settings.region = pmwDataLayer.general.consent_management.restricted_regions;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpmw.console.log(\"Google Consent Mode settings\", google_consent_settings);\n\n\t\t\t\t\t\tgtag(\"consent\", \"default\", google_consent_settings);\n\t\t\t\t\t\tgtag(\"set\", \"ads_data_redaction\", pmwDataLayer.pixels.google.consent_mode.ads_data_redaction);\n\t\t\t\t\t\tgtag(\"set\", \"url_passthrough\", pmwDataLayer.pixels.google.consent_mode.url_passthrough);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Google Linker\n\t\t\t\t\t// https://developers.google.com/gtagjs/devguide/linker\n\t\t\t\t\tif (pmwDataLayer?.pixels?.google?.linker?.settings) {\n\t\t\t\t\t\tgtag(\"set\", \"linker\", pmwDataLayer.pixels.google.linker.settings);\n\t\t\t\t\t}\n\n\t\t\t\t\tgtag(\"js\", new Date());\n\t\t\t\t\tgtag(\"set\", \"developer_id.dNDI5Yz\", true);\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Set Enhanced Conversion Data for Google Ads and GA4 on the order received page\n\t\t\t\t\t *\n\t\t\t\t\t * https://support.google.com/google-ads/answer/9888145#zippy=%2Cvalidate-your-implementation-using-chrome-developer-tools\n\t\t\t\t\t * GA4: https://support.google.com/analytics/answer/14171598?sjid=9970117052450433556-EU\n\t\t\t\t\t */\n\t\t\t\t\tif (\n\t\t\t\t\t\tpmwDataLayer?.shop?.page_type\n\t\t\t\t\t\t&& \"order_received_page\" === pmwDataLayer.shop.page_type\n\t\t\t\t\t\t&& pmwDataLayer?.order?.google?.enhanced_conversion_data\n\t\t\t\t\t) {\n\t\t\t\t\t\tgtag(\"set\", \"user_data\", pmwDataLayer.order.google.enhanced_conversion_data);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Google Ads loader\n\t\t\t\t\tif (!jQuery.isEmptyObject(pmwDataLayer?.pixels?.google?.ads?.conversion_ids)) {  // Only run if the pixel has set up\n\t\t\t\t\t\tif (pmw.googleConfigConditionsMet({type: \"marketing\"})) {  \t\t\t\t\t\t\t// Only run if cookie consent has been given\n\t\t\t\t\t\t\tpmw.fireGtagGoogleAds();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpmw.consent.logSuppressedPixel(\"marketing\", \"Google Ads\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// GA4 loader\n\t\t\t\t\tif (pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) {  \t\t\t// Only run if the pixel has set up\n\n\t\t\t\t\t\tif (pmw.googleConfigConditionsMet({type: \"statistics\"})) {\t\t\t\t\t\t// Only run if cookie consent has been given\n\t\t\t\t\t\t\tpmw.fireGtagGoogleAnalyticsGA4();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpmw.consent.logSuppressedPixel(\"statistics\", \"GA4\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tpmwDataLayer.pixels.google.state = \"ready\";\n\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((jqXHR, textStatus, errorThrown) => {\n\t\t\t\tpmw.console.error(\"The URL \" + trackingUrl + \" could not be loaded. Error: \" + errorThrown);\n\t\t\t\tpmwDataLayer.pixels.google.state = \"error\";\n\t\t\t});\n\t};\n\n\tpmw.gtagLoaded = () => {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\t// If Google is not active, reject the promise\n\t\t\tif (!pmw.isGoogleActive()) reject(\"Google is not active\");\n\n\t\t\tlet startTime = 0;\n\t\t\tlet timeout   = 5000;\n\t\t\tlet frequency = 200;\n\n\t\t\t(function wait() {\n\t\t\t\tif (pmwDataLayer?.pixels?.google?.state === \"ready\") return resolve();\n\t\t\t\tif (startTime >= timeout) {\n\t\t\t\t\tpmw.console.error(\"Google gtag failed to load. Probably a third party script is blocking it.\");\n\t\t\t\t\treturn reject();\n\t\t\t\t}\n\t\t\t\tstartTime += frequency;\n\t\t\t\tsetTimeout(wait, frequency);\n\t\t\t})();\n\t\t});\n\t};\n\n\t/**\n\t * Update Google Consent Mode\n\t *\n\t * @param statistics\n\t * @param marketing\n\t * @param preferences\n\t * @param necessary\n\t */\n\tpmw.updateGoogleConsentMode = ({\n\t\t\t\t\t\t\t\t\t   statistics = pmw.consent.categories.get().statistics,\n\t\t\t\t\t\t\t\t\t   marketing = pmw.consent.categories.get().marketing,\n\t\t\t\t\t\t\t\t\t   preferences = pmw.consent.categories.get().preferences,\n\t\t\t\t\t\t\t\t\t   necessary = pmw.consent.categories.get().necessary,\n\t\t\t\t\t\t\t\t   }) => {\n\n\t\ttry {\n\t\t\tif (!window.gtag) return;\n\n\t\t\tlet data = {\n\t\t\t\tanalytics_storage      : statistics ? \"granted\" : \"denied\",\n\t\t\t\tad_storage             : marketing ? \"granted\" : \"denied\",\n\t\t\t\tad_user_data           : marketing ? \"granted\" : \"denied\",\n\t\t\t\tad_personalization     : marketing ? \"granted\" : \"denied\",\n\t\t\t\tfunctionality_storage  : preferences ? \"granted\" : \"denied\",\n\t\t\t\tpersonalization_storage: preferences ? \"granted\" : \"denied\",\n\t\t\t\tsecurity_storage       : necessary ? \"granted\" : \"denied\",\n\t\t\t\tsource                 : \"pmw\",\n\t\t\t};\n\n\t\t\tgtag(\"consent\", \"update\", data);\n\t\t\tpmw.console.log(\"Google Consent Mode updated\", data);\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\n}(window.pmw = window.pmw || {}, jQuery));\n","/**\n * Load Google base\n */\n\n// Load base\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// if (pmw.canLoadPremiumFeatures()) {\n// \trequire(\"./functions_premium\")\n// \trequire(\"./event_listeners_premium\")\n// }\n// #endif\n","/**\n * Load Google base event listeners\n */\n\n// Pixel load event listener\njQuery(document).on(\"pmw:load-pixels\", function () {\n\n\tif (typeof pmwDataLayer?.pixels?.google?.state === \"undefined\") {\n\t\tif (pmw.googleConfigConditionsMet({log: true})) {\n\t\t\tpmw.loadGoogle()\n\t\t} else {\n\t\t\tpmw.consent.logSuppressedPixel(\"statistics\", \"Google Analytics / Google Ads\")\n\t\t}\n\t}\n})\n\ndocument.addEventListener(\"pmw:consent:update\", ({detail}) => {\n\n\tconst consent = detail\n\n\tpmw.updateGoogleConsentMode(consent)\n}, true)\n","/**\n * Load Google Ads event listeners\n * */\n\n// view_item_list event\njQuery(document).on(\"pmw:pixel:view-item-list\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_ads\")) return;\n\n\t\t// Get Google Ads data from the unified payload structure\n\t\tconst googleAdsData = payload.pixels?.google_ads;\n\n\t\tif (!googleAdsData) {\n\t\t\treturn;\n\t\t}\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_item_list\", googleAdsData);\n\t\t\tpmw.console.log(\"Google Ads: view_item_list event sent\", googleAdsData);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// add_to_cart event\njQuery(document).on(\"pmw:pixel:add-to-cart\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_ads\")) return;\n\n\t\t// Get Google Ads data from the unified payload structure\n\t\tconst googleAdsData = payload.pixels?.google_ads;\n\n\t\tif (!googleAdsData) {\n\t\t\treturn;\n\t\t}\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"add_to_cart\", googleAdsData);\n\t\t\tpmw.console.log(\"Google Ads: add_to_cart event sent\", googleAdsData);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// view_item event\njQuery(document).on(\"pmw:pixel:view-item\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_ads\")) return;\n\n\t\t// Get Google Ads data from the unified payload structure\n\t\tconst googleAdsData = payload.pixels?.google_ads;\n\n\t\tif (!googleAdsData) {\n\t\t\treturn;\n\t\t}\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_item\", googleAdsData);\n\t\t\tpmw.console.log(\"Google Ads: view_item event sent\", googleAdsData);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n\n// view search event\njQuery(document).on(\"pmw:pixel:search\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_ads\")) return;\n\n\t\t// Get Google Ads data from the unified payload structure\n\t\tconst googleAdsData = payload.pixels?.google_ads;\n\n\t\tif (!googleAdsData) {\n\t\t\treturn;\n\t\t}\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_search_results\", googleAdsData);\n\t\t\tpmw.console.log(\"Google Ads: view_search_results event sent\", googleAdsData);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n\n// user log in event\njQuery(document).on(\"pmw:pixel:login\", () => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(pmwDataLayer?.pixels?.google?.ads?.conversion_ids)) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"marketing\"})) return;\n\n\t\tlet data = {\n\t\t\tsend_to: pmw.getGoogleAdsConversionIdentifiers(),\n\t\t};\n\n\t\tif (pmwDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = pmwDataLayer.user.id.raw;\n\t\t}\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"login\", data);\n\t\t\tpmw.console.log(\"Google Ads: login event sent\", data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n/**\n * Google Ads remarketing purchase\n *\n * https://support.google.com/google-ads/answer/7305793\n */\njQuery(document).on(\"pmw:pixel:purchase\", () => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(pmw.getGoogleAdsConversionIdentifiersWithLabel())) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"marketing\"})) return;\n\n\t\tlet data = {\n\t\t\tsend_to: pmw.getGoogleAdsConversionIdentifiers(),\n\t\t\tvalue  : pmwDataLayer.order.value.marketing,\n\t\t\t// currency: pmwDataLayer.order.currency,\n\t\t\titems: pmw.getGoogleAdsRegularOrderItems(),\n\t\t};\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"purchase\", data);\n\t\t\tpmw.console.log(\"Google Ads: purchase event sent (for remarketing lists)\", data);\n\t\t});\n\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n/**\n * Google Ads conversion event\n *\n * new_customer parameter: https://support.google.com/google-ads/answer/9917012\n * cart data: https://support.google.com/google-ads/answer/9028614\n * customer_lifetime_value is undocumented, but available in gtag.js\n */\njQuery(document).on(\"pmw:pixel:purchase\", () => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(pmw.getGoogleAdsConversionIdentifiersWithLabel())) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"marketing\"})) return;\n\n\t\tlet data = {\n\t\t\tsend_to       : pmw.getGoogleAdsConversionIdentifiersWithLabel(),\n\t\t\ttransaction_id: pmwDataLayer.order.number,\n\t\t\tvalue         : pmwDataLayer.order.value.marketing,\n\t\t\tcurrency      : pmwDataLayer.order.currency,\n\t\t\tnew_customer  : pmwDataLayer.order.new_customer,\n\t\t};\n\n\t\tif (pmwDataLayer?.order?.value?.ltv?.marketing) {\n\t\t\tdata.customer_lifetime_value = pmwDataLayer.order.value.ltv.marketing;\n\t\t}\n\n\t\tif (pmwDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = pmwDataLayer.user.id.raw;\n\t\t}\n\n\t\t// https://support.google.com/google-ads/answer/9028614\n\t\tif (pmwDataLayer?.order?.aw_merchant_id) {\n\t\t\tdata.discount         = pmwDataLayer.order.discount;\n\t\t\tdata.aw_merchant_id   = pmwDataLayer.order.aw_merchant_id;\n\t\t\tdata.aw_feed_country  = pmwDataLayer.order.aw_feed_country;\n\t\t\tdata.aw_feed_language = pmwDataLayer.order.aw_feed_language;\n\t\t\tdata.items            = pmw.getGoogleAdsRegularOrderItems();\n\t\t}\n\n\t\t// Add custom variables\n\t\tif (pmwDataLayer?.order?.google?.ads?.custom_variables) {\n\t\t\tObject.entries(pmwDataLayer.order.google.ads.custom_variables).forEach(([key, value]) => {\n\t\t\t\tdata[key] = value;\n\t\t\t});\n\t\t}\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\t// Event needs to be \"purchase\" (not \"conversion\") in order to be able to track cart data:\n\t\t\t// https://support.google.com/google-ads/answer/9028614\n\t\t\tgtag(\"event\", \"purchase\", data);\n\t\t\tpmw.console.log(\"Google Ads: conversion event sent\", data);\n\t\t});\n\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n","/**\n * Load GA4 functions\n * */\n\n(function (pmw, $, undefined) {\n\n\tpmw.getGA4OrderItems = function () {\n\n\t\t// \"item_id\"      : \"34\",\n\t\t// \"item_name\"    : \"Hoodie\",\n\t\t// \"quantity\"     : 1,\n\t\t// \"item_brand\"   : \"\",\n\t\t// \"item_variant\" : \"Color: blue | Logo: yes\",\n\t\t// \"price\"        : 45,\n\t\t// \"currency\"     : \"CHF\",\n\t\t// \"item_category\": \"Hoodies\"\n\n\n\t\tlet orderItems = [];\n\n\t\tObject.values(pmwDataLayer.order.items).forEach((item) => {\n\t\t\tlet orderItem;\n\n\t\t\torderItem = {\n\t\t\t\tquantity     : item.quantity,\n\t\t\t\tprice        : item.price,\n\t\t\t\titem_name    : item.name,\n\t\t\t\tcurrency     : pmwDataLayer.order.currency,\n\t\t\t\titem_category: pmwDataLayer.products[item.id].category.join(\"/\"),\n\t\t\t};\n\n\t\t\t// Check if the item has custom parameters\n\t\t\tif (item?.custom_parameters) {\n\t\t\t\t// Iterate through each key-value pair in custom parameters\n\t\t\t\tObject.keys(item.custom_parameters).forEach((key) => {\n\t\t\t\t\t// Add each custom parameter to the orderItem object\n\t\t\t\t\torderItem[key] = item.custom_parameters[key];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (0 !== item.variation_id) {\n\n\t\t\t\torderItem.item_id      = String(pmwDataLayer.products[item.variation_id].dyn_r_ids[pmwDataLayer.pixels.google.analytics.id_type]);\n\t\t\t\torderItem.item_variant = pmwDataLayer.products[item.variation_id].variant_description;\n\t\t\t\torderItem.item_brand   = pmwDataLayer.products[item.variation_id].brand;\n\t\t\t} else {\n\n\t\t\t\torderItem.item_id    = String(pmwDataLayer.products[item.id].dyn_r_ids[pmwDataLayer.pixels.google.analytics.id_type]);\n\t\t\t\torderItem.item_brand = pmwDataLayer.products[item.id].brand;\n\t\t\t}\n\n\t\t\torderItems.push(orderItem);\n\t\t});\n\n\t\treturn orderItems;\n\t};\n\n\tpmw.ga4AddFormattedCategories = (item_data, categories) => {\n\n\t\tlet maxCategories = 5;\n\n\t\t// remove categories with equal names from array\n\t\tcategories = Array.from(new Set(categories));\n\n\t\tif (Array.isArray(categories) && categories.length) {\n\n\t\t\titem_data[\"item_category\"] = categories[0];\n\n\t\t\tlet max = categories.length > maxCategories ? maxCategories : categories.length;\n\n\t\t\tfor (let i = 1; i < max; i++) {\n\t\t\t\titem_data[\"item_category\" + (i + 1)] = categories[i];\n\t\t\t}\n\t\t}\n\n\t\treturn item_data;\n\t};\n\n\tpmw.getCartItemsGa4 = () => {\n\n\t\tlet data = [];\n\n\t\tObject.values(pmwDataLayer.cart).forEach(product => {\n\t\t\tdata.push(pmw.ga4GetFullProductItemData(product));\n\t\t});\n\n\t\treturn data;\n\t};\n\n\tpmw.ga4GetBasicProductItemData = (product) => {\n\n\t\treturn {\n\t\t\titem_id  : product.dyn_r_ids[pmwDataLayer.pixels.google.analytics.id_type],\n\t\t\titem_name: product.name,\n\t\t\t// coupon   : \"\",\n\t\t\t// discount: 0,\n\t\t\t// affiliation: \"\",\n\t\t\titem_brand  : product.brand,\n\t\t\titem_variant: product.variant,\n\t\t\tprice       : product.price,\n\t\t\tcurrency    : pmwDataLayer.shop.currency,\n\t\t\tquantity    : product.quantity,\n\t\t};\n\t};\n\n\tpmw.ga4AddListNameToProduct = (item_data, productPosition = null) => {\n\n\t\titem_data.item_list_name = pmwDataLayer.shop.list_name;\n\t\titem_data.item_list_id   = pmwDataLayer.shop.list_id;\n\n\t\tif (productPosition) {\n\t\t\titem_data.index = productPosition;\n\t\t}\n\n\t\treturn item_data;\n\t};\n\n\tpmw.ga4GetFullProductItemData = (product) => {\n\n\t\tlet item_data;\n\n\t\titem_data = pmw.ga4GetBasicProductItemData(product);\n\t\titem_data = pmw.ga4AddListNameToProduct(item_data, product.position);\n\t\titem_data = pmw.ga4AddFormattedCategories(item_data, product.category);\n\n\t\treturn item_data;\n\t};\n\n}(window.pmw = window.pmw || {}, jQuery));\n","/**\n * GA4 loader\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// if (pmw.canLoadPremiumFeatures()) {\n// \trequire(\"./functions_premium\")\n// \trequire(\"./event_listeners_premium\")\n// }\n// #endif\n","/**\n * Load Google Ads\n */\n\nrequire(\"./adapter\")\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n","/**\n * Load Google Ads functions\n * */\n\n(function (pmw, $, undefined) {\n\n\n\tpmw.getGoogleAdsConversionIdentifiersWithLabel = () => {\n\n\t\tlet conversionIdentifiers = []\n\n\t\tif (pmwDataLayer?.pixels?.google?.ads?.conversion_ids) {\n\t\t\tObject.entries(pmwDataLayer.pixels.google.ads.conversion_ids).forEach(([key, item]) => {\n\t\t\t\tif (item) {\n\t\t\t\t\t// Check if item is an array (multiple labels for the same conversion_id)\n\t\t\t\t\tif (Array.isArray(item)) {\n\t\t\t\t\t\titem.forEach((label) => {\n\t\t\t\t\t\t\tif (label) {\n\t\t\t\t\t\t\t\tconversionIdentifiers.push(key + \"/\" + label)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconversionIdentifiers.push(key + \"/\" + item)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\treturn conversionIdentifiers\n\t}\n\n\tpmw.getGoogleAdsConversionIdentifiers =  () => {\n\n\t\tlet conversionIdentifiers = []\n\n\t\tObject.keys(pmwDataLayer.pixels.google.ads.conversion_ids).forEach((key) => {\n\t\t\tconversionIdentifiers.push(key)\n\t\t})\n\n\t\treturn conversionIdentifiers\n\t}\n\n\tpmw.getGoogleAdsRegularOrderItems = () => {\n\n\t\tlet orderItems = []\n\n\t\tObject.values(pmwDataLayer.order.items).forEach((item) => {\n\n\t\t\tlet orderItem\n\n\t\t\torderItem = {\n\t\t\t\tquantity                : item.quantity,\n\t\t\t\tprice                   : item.price_tax_excluded,\n\t\t\t\tgoogle_business_vertical: pmwDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t}\n\n\t\t\tif (pmwDataLayer?.shop?.variations_output && 0 !== item.variation_id) {\n\n\t\t\t\torderItem.id = String(pmwDataLayer.products[item.variation_id].dyn_r_ids[pmwDataLayer.pixels.google.ads.dynamic_remarketing.id_type])\n\t\t\t\torderItems.push(orderItem)\n\t\t\t} else {\n\n\t\t\t\torderItem.id = String(pmwDataLayer.products[item.id].dyn_r_ids[pmwDataLayer.pixels.google.ads.dynamic_remarketing.id_type])\n\t\t\t\torderItems.push(orderItem)\n\t\t\t}\n\t\t})\n\n\t\treturn orderItems\n\t}\n\n}(window.pmw = window.pmw || {}, jQuery))\n","/**\n * Load GA4 event listeners\n * */\n\n// view_item_list event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_item_list\njQuery(document).on(\"pmw:pixel:view-item-list\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// select_item event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#select_item\njQuery(document).on(\"pmw:pixel:select-item\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// add_to_cart event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#add_to_cart\njQuery(document).on(\"pmw:pixel:add-to-cart\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// view_item event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_item\njQuery(document).on(\"pmw:pixel:view-item\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// add_to_wishlist event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#add_to_wishlist\njQuery(document).on(\"pmw:pixel:add-to-wishlist\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// remove_from_cart event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#remove_from_cart\njQuery(document).on(\"pmw:pixel:remove-from-cart\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// begin_checkout event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#begin_checkout\njQuery(document).on(\"pmw:pixel:begin-checkout\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// add_shipping_info event\njQuery(document).on(\"pmw:pixel:add-shipping-info\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// add_payment_info event\njQuery(document).on(\"pmw:pixel:add-payment-info\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// view_cart event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_cart\njQuery(document).on(\"pmw:pixel:view-cart\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// view search event\njQuery(document).on(\"pmw:pixel:search\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// view order received page event\njQuery(document).on(\"pmw:pixel:purchase\", (event, payload) => {\n\n\ttry {\n\t\tif (!pmw.shouldFireBrowserPixel(payload, \"google_analytics\")) return;\n\t\tif (!pmwDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\n\t\tconsole.log(\"Google GA4 purchase event listener triggered\");\n\n\t\t// ga4_server_and_browser_tracking experiment\n\t\t// https://app.asana.com/0/1110999795232049/1204453591507565\n\t\t// ga4e: if (pmwDataLayer?.pixels?.google?.analytics?.ga4?.mp_active) {\n\t\t// \tif (pmwDataLayer?.experiments?.ga4_server_and_browser_tracking) {\n\t\t// \t\tbreak ga4e\n\t\t// \t}\n\t\t// \treturn\n\t\t// }\n\n\t\t// Deactivated for the ga4_server_and_browser_tracking experiment\n\t\tif (pmwDataLayer?.pixels?.google?.analytics?.ga4?.mp_active) return;\n\t\tif (!pmw.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst ga4Data = payload.pixels?.google_analytics;\n\t\tif (!ga4Data) return;\n\n\t\tpmw.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", ga4Data.event_name, ga4Data.event_data);\n\t\t\tpmw.console.log(`Google Analytics: ${ga4Data.event_name} event sent`, ga4Data.event_data);\n\t\t});\n\n\t\t// pmw.gtagLoaded().then(function () {\n\t\t// \tgtag(\"get\", pmwDataLayer.pixels.google.analytics.ga4.measurement_id, \"client_id\", (client_id) => {\n\t\t// \t\tconsole.log(\"transaction_id: \" + pmwDataLayer.order.number + \" client_id: \" + client_id)\n\t\t// \t})\n\t\t// })\n\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n","/**\n * Google Ads Adapter\n * \n * Adapts standardized event data into Google Ads format.\n * Handles both dynamic remarketing and conversion tracking events.\n * \n * @since 1.51.0\n */\n\n(function (pmw, $, undefined) {\n\n\t/**\n\t * Google Ads Data Adapter\n\t */\n\tconst GoogleAdsAdapter = {\n\t\t\n\t\t/**\n\t\t * Main adapt method - routes to specific event adapters\n\t\t * \n\t\t * @param {object} eventData - Standardized event data\n\t\t * @param {string} eventName - Event name (add_to_cart, view_item, etc.)\n\t\t * @param {object} context - Event context (user, session, page data)\n\t\t * @returns {object|null} Google Ads-formatted data or null if pixel inactive\n\t\t */\n\t\tadapt(eventData, eventName, context) {\n\t\t\t// Check if Google Ads is active\n\t\t\tif (jQuery.isEmptyObject(pmwDataLayer?.pixels?.google?.ads?.conversion_ids)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\t// Check if marketing tracking is allowed\n\t\t\tif (!pmw.googleConfigConditionsMet({type: \"marketing\"})) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t// Map standardized event names to adapter methods\n\t\tconst eventMap = {\n\t\t\t'view_item_list': this.adaptViewItemList,\n\t\t\t'add_to_cart': this.adaptAddToCart,\n\t\t\t'view_item': this.adaptViewItem,\n\t\t\t'search': this.adaptSearch,\n\t\t\t'login': this.adaptLogin,\n\t\t\t'purchase': this.adaptPurchase\n\t\t};\t\t\tconst adapter = eventMap[eventName];\n\t\t\t\n\t\t\tif (!adapter) {\n\t\t\t\tpmw.console.log(`No Google Ads adapter for event: ${eventName}`);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\treturn adapter.call(this, eventData, context);\n\t\t\t} catch (e) {\n\t\t\t\tpmw.console.error(`Google Ads adapter error for ${eventName}:`, e);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Get base data structure for Google Ads events\n\t\t */\n\t\tgetBaseData() {\n\t\t\tconst baseData = {\n\t\t\t\tsend_to: pmw.getGoogleAdsConversionIdentifiers()\n\t\t\t};\n\t\t\t\n\t\t\t// Add user_id if available\n\t\t\tif (pmwDataLayer?.user?.id?.raw) {\n\t\t\t\tbaseData.user_id = pmwDataLayer.user.id.raw;\n\t\t\t}\n\t\t\t\n\t\t\treturn baseData;\n\t\t},\n\t\t\n\t\t/**\n\t\t * Get product item data for Google Ads\n\t\t */\n\t\tgetProductItemData(product) {\n\t\t\t// Ensure product and dyn_r_ids exist before accessing\n\t\t\tif (!product?.dyn_r_ids) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\treturn {\n\t\t\t\tid: product.dyn_r_ids[pmwDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\tgoogle_business_vertical: pmwDataLayer.pixels.google.ads.google_business_vertical\n\t\t\t};\n\t\t},\n\t\t\n\t\t/**\n\t\t * Adapt view_item_list event\n\t\t */\n\t\tadaptViewItemList(eventData, context) {\n\t\t\tconst product = eventData.product;\n\t\t\t\n\t\t\t// Prevent cached hits\n\t\t\tif (!product) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\t// Skip if variations should not be tracked with parent IDs\n\t\t\tif (\n\t\t\t\tpmwDataLayer?.shop?.variations_output &&\n\t\t\t\tproduct.is_variable &&\n\t\t\t\tpmwDataLayer.pixels.google.ads.dynamic_remarketing.send_events_with_parent_ids === false\n\t\t\t) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\tconst itemData = this.getProductItemData(product);\n\t\t\tif (!itemData) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\treturn {\n\t\t\t\t...this.getBaseData(),\n\t\t\t\titems: [itemData]\n\t\t\t};\n\t\t},\n\t\t\n\t\t/**\n\t\t * Adapt add_to_cart event\n\t\t */\n\t\tadaptAddToCart(eventData, context) {\n\t\t\tconst product = eventData.product;\n\t\t\t\n\t\t\tconst itemData = this.getProductItemData(product);\n\t\t\tif (!itemData) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\treturn {\n\t\t\t\t...this.getBaseData(),\n\t\t\t\tvalue: product.quantity * product.price,\n\t\t\t\titems: [{\n\t\t\t\t\t...itemData,\n\t\t\t\t\tquantity: product.quantity,\n\t\t\t\t\tprice: product.price\n\t\t\t\t}]\n\t\t\t};\n\t\t},\n\t\t\n\t\t/**\n\t\t * Adapt view_item event\n\t\t */\n\t\tadaptViewItem(eventData, context) {\n\t\t\tconst product = eventData.product;\n\t\t\tconst data = this.getBaseData();\n\t\t\t\n\t\t\tif (product) {\n\t\t\t\tconst itemData = this.getProductItemData(product);\n\t\t\t\tif (!itemData) {\n\t\t\t\t\t// No valid product data, return null to skip this event\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdata.value = (product.quantity ? product.quantity : 1) * product.price;\n\t\t\t\tdata.items = [{\n\t\t\t\t\t...itemData,\n\t\t\t\t\tquantity: (product.quantity ? product.quantity : 1),\n\t\t\t\t\tprice: product.price\n\t\t\t\t}];\n\t\t\t}\n\t\t\t\n\t\t\treturn data;\n\t\t},\n\t\t\n\t\t/**\n\t\t * Adapt search event\n\t\t */\n\t\tadaptSearch(eventData, context) {\n\t\t\tconst products = [];\n\t\t\t\n\t\t\tObject.values(pmwDataLayer.products).forEach(product => {\n\t\t\t\t// Skip variations if configured\n\t\t\t\tif (\n\t\t\t\t\tpmwDataLayer?.shop?.variations_output &&\n\t\t\t\t\tproduct.is_variable &&\n\t\t\t\t\tpmwDataLayer.pixels.google.ads.dynamic_remarketing.send_events_with_parent_ids === false\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst itemData = this.getProductItemData(product);\n\t\t\t\tif (!itemData) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tproducts.push({\n\t\t\t\t\t...itemData\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\treturn {\n\t\t\t\t...this.getBaseData(),\n\t\t\t\titems: products\n\t\t\t};\n\t\t},\n\t\t\n\t\t/**\n\t\t * Adapt login event\n\t\t */\n\t\tadaptLogin(eventData, context) {\n\t\t\treturn this.getBaseData();\n\t\t},\n\t\t\n\t\t/**\n\t\t * Adapt purchase event (order received page)\n\t\t * \n\t\t * Google Ads has two types of purchase events:\n\t\t * 1. Remarketing purchase event\n\t\t * 2. Conversion tracking event\n\t\t * \n\t\t * This adapter returns both as separate events\n\t\t */\n\t\tadaptPurchase(eventData, context) {\n\t\t\tif (!pmwDataLayer?.order) {\n\t\t\t\tpmw.console.error('Order data not available for Google Ads Purchase event');\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\t// Return both remarketing and conversion data\n\t\t\treturn {\n\t\t\t\t// Remarketing purchase event\n\t\t\t\tremarketing: {\n\t\t\t\t\tsend_to: pmw.getGoogleAdsConversionIdentifiers(),\n\t\t\t\t\tvalue: pmwDataLayer.order.value.marketing,\n\t\t\t\t\titems: pmw.getGoogleAdsRegularOrderItems()\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\t// Conversion tracking event\n\t\t\t\tconversion: {\n\t\t\t\t\tsend_to: pmw.getGoogleAdsConversionIdentifiersWithLabel(),\n\t\t\t\t\ttransaction_id: pmwDataLayer.order.number,\n\t\t\t\t\tvalue: pmwDataLayer.order.value.marketing,\n\t\t\t\t\tcurrency: pmwDataLayer.order.currency,\n\t\t\t\t\tnew_customer: pmwDataLayer.order.new_customer,\n\t\t\t\t\t...(pmwDataLayer?.order?.value?.ltv?.marketing && {\n\t\t\t\t\t\tcustomer_lifetime_value: pmwDataLayer.order.value.ltv.marketing\n\t\t\t\t\t}),\n\t\t\t\t\t...(pmwDataLayer?.user?.id?.raw && {\n\t\t\t\t\t\tuser_id: pmwDataLayer.user.id.raw\n\t\t\t\t\t}),\n\t\t\t\t\t// Cart data if merchant center is configured\n\t\t\t\t\t...(pmwDataLayer?.order?.aw_merchant_id && {\n\t\t\t\t\t\tdiscount: pmwDataLayer.order.discount,\n\t\t\t\t\t\taw_merchant_id: pmwDataLayer.order.aw_merchant_id,\n\t\t\t\t\t\taw_feed_country: pmwDataLayer.order.aw_feed_country,\n\t\t\t\t\t\taw_feed_language: pmwDataLayer.order.aw_feed_language,\n\t\t\t\t\t\titems: pmw.getGoogleAdsRegularOrderItems()\n\t\t\t\t\t}),\n\t\t\t\t\t// Custom variables\n\t\t\t\t\t...(pmwDataLayer?.order?.google?.ads?.custom_variables && \n\t\t\t\t\t\tpmwDataLayer.order.google.ads.custom_variables\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t};\n\n\t// Register the adapter\n\tpmw.registerAdapter('google_ads', GoogleAdsAdapter, {\n\t\tisActive: () => {\n\t\t\treturn pmwDataLayer?.pixels?.google?.ads?.conversion_ids && \n\t\t\t\tObject.keys(pmwDataLayer.pixels.google.ads.conversion_ids).length > 0;\n\t\t}\n\t});\n\n}(window.pmw = window.pmw || {}, jQuery));\n","/**\n * Google Analytics loader\n */\n\nrequire(\"./adapter\")\nrequire(\"./ga4/loader\")\n"],"names":["require","pmw","registerAdapter","adapt","eventData","eventName","context","pmwDataLayer","pixels","google","analytics","ga4","measurement_id","eventMap","view_item_list","this","adaptViewItemList","select_item","adaptSelectItem","add_to_cart","adaptAddToCart","view_item","adaptViewItem","add_to_wishlist","adaptAddToWishlist","remove_from_cart","adaptRemoveFromCart","begin_checkout","adaptBeginCheckout","add_shipping_info","adaptAddShippingInfo","add_payment_info","adaptAddPaymentInfo","view_cart","adaptViewCart","search","adaptSearch","purchase","adaptPurchase","product","event_name","event_data","send_to","items","ga4GetFullProductItemData","item_list_name","shop","list_name","item_list_id","list_id","currency","value","price","quantity","data","getCartValue","getCartItemsGa4","shippingTier","text","shipping_tier","paymentType","payment_type","jQuery","isEmptyObject","cart","products","cartValue","Object","values","forEach","push","toFixed","search_term","getSearchTermFromUrl","mp_active","transaction_id","order","number","affiliation","total","discount","tax","shipping","coupon","getGA4OrderItems","payment_type_title","custom_parameters","keys","key","isActive","window","googleConfigConditionsMet","type","log","consent_mode","is_active","console","consent","categories","get","marketing","statistics","fireGtagGoogleAds","ads","state","enhanced_conversions","conversion_ids","gtag","phone_conversion_label","phone_conversion_number","e","error","fireGtagGoogleAnalyticsGA4","parameters","debug_mode","isGoogleActive","getGoogleGtagId","tag_id","GTG_HANDLER_CACHE_KEY","gtgDetectionInProgress","VALID_HANDLERS","getGtgHandler","cached","retrieveData","includes","cacheGtgHandler","handler","storeData","getGoogleTagGatewayUrlAsync","async","tagId","tagGateway","tag_gateway","measurement_path","Promise","resolve","checkInterval","setInterval","clearInterval","setTimeout","healthUrl","fetch","method","cache","headers","message","proxy_url","detectGtgHandler","encodeURIComponent","getGoogleTagGatewayUrl","getGoogleTrackingUrlAsync","isBotUserAgent","getGoogleStandardTrackingUrl","gatewayUrl","getGoogleTrackingUrl","loadGoogle","trackingUrl","startsWith","location","origin","loadScriptAndCacheIt","then","script","textStatus","tcf_support","dataLayer","arguments","api","processExternalGcmConsentUpdate_experimental","length","source","google_consent_settings","ad_personalization","ad_storage","ad_user_data","analytics_storage","functionality_storage","preferences","personalization_storage","security_storage","necessary","wait_for_update","general","consent_management","restricted_regions","region","ads_data_redaction","url_passthrough","linker","settings","Date","page_type","enhanced_conversion_data","logSuppressedPixel","catch","jqXHR","errorThrown","gtagLoaded","reject","startTime","wait","updateGoogleConsentMode","document","on","addEventListener","detail","event","payload","shouldFireBrowserPixel","googleAdsData","google_ads","getGoogleAdsConversionIdentifiers","user","id","raw","user_id","getGoogleAdsConversionIdentifiersWithLabel","getGoogleAdsRegularOrderItems","new_customer","ltv","customer_lifetime_value","aw_merchant_id","aw_feed_country","aw_feed_language","custom_variables","entries","orderItems","item","orderItem","item_name","name","item_category","category","join","variation_id","item_id","String","dyn_r_ids","id_type","item_variant","variant_description","item_brand","brand","ga4AddFormattedCategories","item_data","Array","from","Set","isArray","max","i","ga4GetBasicProductItemData","variant","ga4AddListNameToProduct","productPosition","index","position","conversionIdentifiers","label","price_tax_excluded","google_business_vertical","variations_output","dynamic_remarketing","ga4Data","google_analytics","GoogleAdsAdapter","adapter","adaptLogin","call","getBaseData","baseData","getProductItemData","is_variable","send_events_with_parent_ids","itemData","remarketing","conversion"],"ignoreList":[],"sourceRoot":""}